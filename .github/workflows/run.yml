name: Run

on:
    workflow_dispatch:
        inputs:
            runner:
                required: true
                default: "ubuntu-latest"

jobs:
    run:
        runs-on: ${{ github.event.inputs.runner }}
        permissions: write-all
        steps:
            - name: Cleanup storage
              uses: rokibhasansagar/slimhub_actions@main

            - name: Update packages
              run: |
                  sudo apt update
                  sudo apt upgrade -y
                  sudo apt install neovim -y

            - name: Setup session
              if: success() || failure()
              uses: owenthereal/action-upterm@v1
              with:
                  limit-access-to-actor: true

            - name: Upload artifacts
              if: always()
              uses: actions/upload-artifact@v4
              with:
                  path: artifacts/*
                  compression-level: 9

            
